(function(a){JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(g,b,d){var k=AJS.$("#create-issue-submit").val();var h=AJS.$("#issue-create-submit").val();var i=AJS.$("#edit-issue-submit").val();if(k=="Create"||h=="Create"||i=="Update"){AJS.$("#dummytable").hide()}AJS.$("#create-issue-submit").click(function(){AJS.log("CREATE ISSUE CLICK DETECTED");var e=AJS.$("#issuetype-field").val();var m=AJS.$("#project-field").val();if(m=="IT Incident Management (ITIM)"&&e=="Incident"){var e=AJS.$("#sample").val();if(e!=""){c(e)}else{var l="<table style=border-style:none;width:100%><thead><tr bgcolor=#D0CECE><th style='border:1px solid Black;width:20%'>Date</th><th style='border:1px solid Black;width:20%'>Time</th><th style='border:1px solid Black;width:60%'>Description</th><th style='display:none;width:0%;background-color:#FFFFFF;border-left:1px;border-right:0;border-top:0;border-bottom:0'><font color=#FFFFFF>Index</font></th></tr></thead><tbody></tbody></table>";AJS.$("#custome").val(l)}}});AJS.$("#issue-create-submit").on("click",function(){var m=AJS.$("#issue-create-project-name").text();var e=AJS.$("#issue-create-issue-type").text();if(m==" IT Incident Management"||m=="IT Incident Management"&&e=="Incident"){var e=AJS.$("#sample").val();if(e!=""){c(e)}else{var l="<table style=border-style:none;width:100%><thead><tr bgcolor=#D0CECE><th style='border:1px solid Black;width:20%'>Date</th><th style='border:1px solid Black;width:20%'>Time</th><th style='border:1px solid Black;width:60%'>Description</th><th style='display:none;width:0%;background-color:#FFFFFF;border-left:1px;border-right:0;border-top:0;border-bottom:0'><font color=#FFFFFF>Index</font></th></tr></thead><tbody></tbody></table>";AJS.$("#custome").val(l)}}});function c(p){var x=p.split(":,");var u=new Array();if(x.length>1){for(var D=0,A=x.length;D<A;D++){var w=x[D];var y=new Array();var q=x.length-1;var t=w.split(",");var n=t.length;var E="";var F=0;if(n>5){for(var C=3,B=n;C<B;C++){if(C!=(n-1)){if(C==3){E=t[C]}else{E+=t[C]}if(C!=(n-2)){E+=","}}F=C}}else{E=t[3];F=4}var t=w.split(",");var o=t[0]+","+t[1];y.push(o);y.push(t[2]);y.push(E);if(D==q){var s=t[F].split(":");y.push(s[0])}else{y.push(t[F])}u.push(y)}}else{var y=new Array();var t=p.split(",");var n=t.length;var E="";var F=0;if(n>5){for(var C=3,B=n;C<B;C++){if(C!=(n-1)){if(C==3){E=t[C]}else{E+=t[C]}if(C!=(n-2)){E+=","}}F=C}}else{E=t[3];F=4}var t=p.split(",");var o=t[0]+","+t[1];y.push(o);y.push(t[2]);y.push(E);var s=t[F].split(":");y.push(s[0]);u.push(y)}var H=[];var v=" ";var m=true;for(var D=0,A=u.length;D<A;D++){var z=u[D][0];var G=u[D][1];var e=u[D][2];var r=u[D][3];m=f(z);if(m==false){return false}H.push({date:z,time:G,desc:e,index:r})}j(H)}function j(l){AJS.$("#dummytable").html("<thead></thead><tbody></tbody>");AJS.$("#dummytable").jsonTable({head:["Date","Time","Description","Index"],json:["date","time","desc","index"]});AJS.$("#dummytable").jsonTableUpdate({source:l,callback:function(){}});var e="<table style=border-style:none;width:100%>"+AJS.$("#dummytable").html()+"</table>";AJS.$("#custome").val(e)}AJS.$("#edit-issue-submit").on("click",function(){AJS.log("Checking if timeline of events is edited");var e=AJS.$("#sample").val();if(e!=""){c(e)}else{var l="<table style=border-style:none;width:100%><thead><tr bgcolor=#D0CECE><th style='border:1px solid Black;width:20%'>Date</th><th style='border:1px solid Black;width:20%'>Time</th><th style='border:1px solid Black;width:60%'>Description</th><th style='display:none;width:0%;background-color:#FFFFFF;border-left:1px;border-right:0;border-top:0;border-bottom:0'><font color=#FFFFFF>Index</font></th></tr></thead><tbody></tbody></table>";AJS.$("#custome").val(l)}});function f(p){var n=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");var u=p.split(" ");if(u.length!=3){alert("DateFormat  is not proper");return false}if(u[0].length==3){var s=false;for(var r=0,q=n.length;r<q;r++){if(u[0]==n[r]){s=true;break}}if(s==false){alert("Month is not proper");return false}}else{alert("Month is not proper");return}if(u[1].length==3||u[1].length==2){var t=u[1].split(",");var m=parseInt(t[0]);var o=m.toString().length;var e=t[0].length;if(e!=o){alert("Date is not proper");return false}if(m==NaN){alert("Date is not proper");return false}if(t[0]<1||t[0]>31){alert("Date is not proper");return false}}else{alert("Date is not proper");return false}if(u[2].length!=4){alert("Year is not proper");return false}}})})(AJS.$);