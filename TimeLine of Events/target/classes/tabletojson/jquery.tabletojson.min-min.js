/*! tabletojson - v0.9.0 - Daniel White */
!function(b){b.fn.tableToJSON=function(t){var s={ignoreColumns:[],onlyColumns:null,ignoreHiddenRows:!0,headings:null,allowHTML:!1,includeRowId:!1};t=b.extend(s,t);var r=function(c){return void 0!==c&&null!==c},q=function(d){return r(t.onlyColumns)?-1===b.inArray(d,t.onlyColumns):-1!==b.inArray(d,t.ignoreColumns)},p=function(d,i){var h={},g=0;return b.each(i,function(e,f){g<d.length&&r(f)&&(h[d[g]]=f,g++)}),h},o=function(u,k){var j,i,d=b(k).data("override");return j=b.trim(t.allowHTML?b(k).html():b(k).text()),i=r(d)?d:j},n=function(u){var k=[],j=t.includeRowId,i="boolean"==typeof j?j:"string"==typeof j?!0:!1,g="string"==typeof j==!0?j:"rowId";return i&&"undefined"==typeof b(u).attr("id")&&k.push(g),b(u).children("td,th").each(function(d,c){k.push(o(d,c))}),k},m=function(d){var e=d.find("tr:first").first();return r(t.headings)?t.headings:n(e)},l=function(B,A){var z,y,x,w,v,u,g,f=[],e=0,d=[];return B.children("tbody,*").children("tr").each(function(C,k){if(C>0||r(t.headings)){var j=t.includeRowId,i="boolean"==typeof j?j:"string"==typeof j?!0:!1;u=b(k),(u.is(":visible")||!t.ignoreHiddenRows)&&(e=0,f[C]||(f[C]=[]),i&&(e+=1,f[C].push("undefined"!=typeof u.attr("id")?u.attr("id"):"")),u.children().each(function(){if(g=b(this),g.filter("[rowspan]").length){for(x=parseInt(g.attr("rowspan"),10)-1,v=o(e,g,[]),z=1;x>=z;z++){f[C+z]||(f[C+z]=[]),f[C+z][e]=v}}if(g.filter("[colspan]").length){for(x=parseInt(g.attr("colspan"),10)-1,v=o(e,g,[]),z=1;x>=z;z++){if(g.filter("[rowspan]").length){for(w=parseInt(g.attr("rowspan"),10),y=0;w>y;y++){f[C+y][e+z]=v}}else{f[C][e+z]=v}}}for(;f[C][e];){e++}v=f[C][e]||o(e,g,[]),r(v)&&(f[C][e]=v),e++}))}}),b.each(f,function(D,C){if(r(C)){var k=r(t.onlyColumns)||t.ignoreColumns.length?b.grep(C,function(i,c){return !q(c)}):C,h=r(t.headings)?A:b.grep(A,function(i,c){return !q(c)});v=p(h,k),d[d.length]=v}}),d},a=m(this);return l(this,a)}}(jQuery);