(function(s){s.jqplot.DateAxisRenderer=function(){s.jqplot.LinearAxisRenderer.call(this);this.date=new s.jsDate()};var x=1000;var v=60*x;var u=60*v;var o=24*u;var y=7*o;var q=30.4368499*o;var p=365.242199*o;var t=[31,28,31,30,31,30,31,30,31,30,31,30];var r=["%M:%S.%#N","%M:%S.%#N","%M:%S.%#N","%M:%S","%M:%S","%M:%S","%M:%S","%H:%M:%S","%H:%M:%S","%H:%M","%H:%M","%H:%M","%H:%M","%H:%M","%H:%M","%a %H:%M","%a %H:%M","%b %e %H:%M","%b %e %H:%M","%b %e %H:%M","%b %e %H:%M","%v","%v","%v","%v","%v","%v","%v"];var n=[0.1*x,0.2*x,0.5*x,x,2*x,5*x,10*x,15*x,30*x,v,2*v,5*v,10*v,15*v,30*v,u,2*u,4*u,6*u,8*u,12*u,o,2*o,3*o,4*o,5*o,y,2*y];var w=[];function z(c,i,h){var d=Number.MAX_VALUE;var g,a,f;for(var b=0,e=n.length;b<e;b++){g=Math.abs(h-n[b]);if(g<d){d=g;a=n[b];f=r[b]}}return[a,f]}s.jqplot.DateAxisRenderer.prototype=new s.jqplot.LinearAxisRenderer();s.jqplot.DateAxisRenderer.prototype.constructor=s.jqplot.DateAxisRenderer;s.jqplot.DateTickFormatter=function(b,a){if(!b){b="%Y/%m/%d"}return s.jsDate.strftime(a,b)};s.jqplot.DateAxisRenderer.prototype.init=function(H){this.tickOptions.formatter=s.jqplot.DateTickFormatter;this.tickInset=0;this.drawBaseline=true;this.baselineWidth=null;this.baselineColor=null;this.daTickInterval=null;this._daTickInterval=null;s.extend(true,this,H);var d=this._dataBounds,F,k,b,j,h,i,g;for(var G=0;G<this._series.length;G++){F={intervals:[],frequencies:{},sortedIntervals:[],min:null,max:null,mean:null};k=0;b=this._series[G];j=b.data;h=b._plotData;i=b._stackData;g=0;for(var a=0;a<j.length;a++){if(this.name=="xaxis"||this.name=="x2axis"){j[a][0]=new s.jsDate(j[a][0]).getTime();h[a][0]=new s.jsDate(j[a][0]).getTime();i[a][0]=new s.jsDate(j[a][0]).getTime();if((j[a][0]!=null&&j[a][0]<d.min)||d.min==null){d.min=j[a][0]}if((j[a][0]!=null&&j[a][0]>d.max)||d.max==null){d.max=j[a][0]}if(a>0){g=Math.abs(j[a][0]-j[a-1][0]);F.intervals.push(g);if(F.frequencies.hasOwnProperty(g)){F.frequencies[g]+=1}else{F.frequencies[g]=1}}k+=g}else{j[a][1]=new s.jsDate(j[a][1]).getTime();h[a][1]=new s.jsDate(j[a][1]).getTime();i[a][1]=new s.jsDate(j[a][1]).getTime();if((j[a][1]!=null&&j[a][1]<d.min)||d.min==null){d.min=j[a][1]}if((j[a][1]!=null&&j[a][1]>d.max)||d.max==null){d.max=j[a][1]}if(a>0){g=Math.abs(j[a][1]-j[a-1][1]);F.intervals.push(g);if(F.frequencies.hasOwnProperty(g)){F.frequencies[g]+=1}else{F.frequencies[g]=1}}}k+=g}if(b.renderer.bands){if(b.renderer.bands.hiData.length){var l=b.renderer.bands.hiData;for(var a=0,c=l.length;a<c;a++){if(this.name==="xaxis"||this.name==="x2axis"){l[a][0]=new s.jsDate(l[a][0]).getTime();if((l[a][0]!=null&&l[a][0]>d.max)||d.max==null){d.max=l[a][0]}}else{l[a][1]=new s.jsDate(l[a][1]).getTime();if((l[a][1]!=null&&l[a][1]>d.max)||d.max==null){d.max=l[a][1]}}}}if(b.renderer.bands.lowData.length){var l=b.renderer.bands.lowData;for(var a=0,c=l.length;a<c;a++){if(this.name==="xaxis"||this.name==="x2axis"){l[a][0]=new s.jsDate(l[a][0]).getTime();if((l[a][0]!=null&&l[a][0]<d.min)||d.min==null){d.min=l[a][0]}}else{l[a][1]=new s.jsDate(l[a][1]).getTime();if((l[a][1]!=null&&l[a][1]<d.min)||d.min==null){d.min=l[a][1]}}}}}var f=0,m=0;for(var e in F.frequencies){F.sortedIntervals.push({interval:e,frequency:F.frequencies[e]})}F.sortedIntervals.sort(function(A,B){return B.frequency-A.frequency});F.min=s.jqplot.arrayMin(F.intervals);F.max=s.jqplot.arrayMax(F.intervals);F.mean=k/j.length;this._intervalStats.push(F);F=k=b=j=h=i=null}d=null};s.jqplot.DateAxisRenderer.prototype.reset=function(){this.min=this._options.min;this.max=this._options.max;this.tickInterval=this._options.tickInterval;this.numberTicks=this._options.numberTicks;this._autoFormatString="";if(this._overrideFormatString&&this.tickOptions&&this.tickOptions.formatString){this.tickOptions.formatString=""}this.daTickInterval=this._daTickInterval};s.jqplot.DateAxisRenderer.prototype.createTicks=function(aH){var c=this._ticks;var ag=this.ticks;var am=this.name;var ak=this._dataBounds;var af=this._intervalStats;var aJ=(this.name.charAt(0)==="x")?this._plotDimensions.width:this._plotDimensions.height;var aB;var ao,ai;var az,aA;var ar,ax;var aE=30;var l=1;var f=null;if(this.tickInterval!=null){if(Number(this.tickInterval)){f=[Number(this.tickInterval),"seconds"]}else{if(typeof this.tickInterval=="string"){var at=this.tickInterval.split(" ");if(at.length==1){f=[1,at[0]]}else{if(at.length==2){f=[at[0],at[1]]}}}}}var aC=this.tickInterval;ao=new s.jsDate((this.min!=null)?this.min:ak.min).getTime();ai=new s.jsDate((this.max!=null)?this.max:ak.max).getTime();var aw=aH.plugins.cursor;if(aw&&aw._zoom&&aw._zoom.zooming){this.min=null;this.max=null}var au=ai-ao;if(this.tickOptions==null||!this.tickOptions.formatString){this._overrideFormatString=true}if(ag.length){for(ax=0;ax<ag.length;ax++){var k=ag[ax];var b=new this.tickRenderer(this.tickOptions);if(k.constructor==Array){b.value=new s.jsDate(k[0]).getTime();b.label=k[1];if(!this.showTicks){b.showLabel=false;b.showMark=false}else{if(!this.showTickMarks){b.showMark=false}}b.setTick(b.value,this.name);this._ticks.push(b)}else{b.value=new s.jsDate(k).getTime();if(!this.showTicks){b.showLabel=false;b.showMark=false}else{if(!this.showTickMarks){b.showMark=false}}b.setTick(b.value,this.name);this._ticks.push(b)}}this.numberTicks=ag.length;this.min=this._ticks[0].value;this.max=this._ticks[this.numberTicks-1].value;this.daTickInterval=[(this.max-this.min)/(this.numberTicks-1)/1000,"seconds"]}else{if(this.min==null&&this.max==null&&ak.min==ak.max){var an=s.extend(true,{},this.tickOptions,{name:this.name,value:null});var g=300000;this.min=ak.min-g;this.max=ak.max+g;this.numberTicks=3;for(var ax=this.min;ax<=this.max;ax+=g){an.value=ax;var b=new this.tickRenderer(an);if(this._overrideFormatString&&this._autoFormatString!=""){b.formatString=this._autoFormatString}b.showLabel=false;b.showMark=false;this._ticks.push(b)}if(this.showTicks){this._ticks[1].showLabel=true}if(this.showTickMarks){this._ticks[1].showTickMarks=true}}else{if(this.min==null&&this.max==null){var m=s.extend(true,{},this.tickOptions,{name:this.name,value:null});var av,aj;if(!this.tickInterval&&!this.numberTicks){var i=Math.max(aJ,aE+1);var a=115;if(this.tickRenderer===s.jqplot.CanvasAxisTickRenderer&&this.tickOptions.angle){a=115-40*Math.abs(Math.sin(this.tickOptions.angle/180*Math.PI))}av=Math.ceil((i-aE)/a+1);aj=(ai-ao)/(av-1)}else{if(this.tickInterval){aj=new s.jsDate(0).add(f[0],f[1]).getTime()}else{if(this.numberTicks){av=this.numberTicks;aj=(ai-ao)/(av-1)}}}if(aj<=19*o){var j=z(ao,ai,aj);var aF=j[0];this._autoFormatString=j[1];ao=new s.jsDate(ao);ao=Math.floor((ao.getTime()-ao.getUtcOffset())/aF)*aF+ao.getUtcOffset();av=Math.ceil((ai-ao)/aF)+1;this.min=ao;this.max=ao+(av-1)*aF;if(this.max<ai){this.max+=aF;av+=1}this.tickInterval=aF;this.numberTicks=av;for(var ax=0;ax<av;ax++){m.value=this.min+ax*aF;b=new this.tickRenderer(m);if(this._overrideFormatString&&this._autoFormatString!=""){b.formatString=this._autoFormatString}if(!this.showTicks){b.showLabel=false;b.showMark=false}else{if(!this.showTickMarks){b.showMark=false}}this._ticks.push(b)}l=this.tickInterval}else{if(aj<=9*q){this._autoFormatString="%v";var ap=Math.round(aj/q);if(ap<1){ap=1}else{if(ap>6){ap=6}}var e=new s.jsDate(ao).setDate(1).setHours(0,0,0,0);var aG=new s.jsDate(ai);var ay=new s.jsDate(ai).setDate(1).setHours(0,0,0,0);if(aG.getTime()!==ay.getTime()){ay=ay.add(1,"month")}var h=ay.diff(e,"month");av=Math.ceil(h/ap)+1;this.min=e.getTime();this.max=e.clone().add((av-1)*ap,"month").getTime();this.numberTicks=av;for(var ax=0;ax<av;ax++){if(ax===0){m.value=e.getTime()}else{m.value=e.add(ap,"month").getTime()}b=new this.tickRenderer(m);if(this._overrideFormatString&&this._autoFormatString!=""){b.formatString=this._autoFormatString}if(!this.showTicks){b.showLabel=false;b.showMark=false}else{if(!this.showTickMarks){b.showMark=false}}this._ticks.push(b)}l=ap*q}else{this._autoFormatString="%v";var ap=Math.round(aj/p);if(ap<1){ap=1}var e=new s.jsDate(ao).setMonth(0,1).setHours(0,0,0,0);var ay=new s.jsDate(ai).add(1,"year").setMonth(0,1).setHours(0,0,0,0);var ah=ay.diff(e,"year");av=Math.ceil(ah/ap)+1;this.min=e.getTime();this.max=e.clone().add((av-1)*ap,"year").getTime();this.numberTicks=av;for(var ax=0;ax<av;ax++){if(ax===0){m.value=e.getTime()}else{m.value=e.add(ap,"year").getTime()}b=new this.tickRenderer(m);if(this._overrideFormatString&&this._autoFormatString!=""){b.formatString=this._autoFormatString}if(!this.showTicks){b.showLabel=false;b.showMark=false}else{if(!this.showTickMarks){b.showMark=false}}this._ticks.push(b)}l=ap*p}}}else{if(am=="xaxis"||am=="x2axis"){aJ=this._plotDimensions.width}else{aJ=this._plotDimensions.height}if(this.min!=null&&this.max!=null&&this.numberTicks!=null){this.tickInterval=null}if(this.tickInterval!=null&&f!=null){this.daTickInterval=f}if(ao==ai){var aI=24*60*60*500;ao-=aI;ai+=aI}au=ai-ao;var al=2+parseInt(Math.max(0,aJ-100)/100,10);var d,aq;d=(this.min!=null)?new s.jsDate(this.min).getTime():ao-au/2*(this.padMin-1);aq=(this.max!=null)?new s.jsDate(this.max).getTime():ai+au/2*(this.padMax-1);this.min=d;this.max=aq;au=this.max-this.min;if(this.numberTicks==null){if(this.daTickInterval!=null){var aD=new s.jsDate(this.max).diff(this.min,this.daTickInterval[1],true);this.numberTicks=Math.ceil(aD/this.daTickInterval[0])+1;this.max=new s.jsDate(this.min).add((this.numberTicks-1)*this.daTickInterval[0],this.daTickInterval[1]).getTime()}else{if(aJ>200){this.numberTicks=parseInt(3+(aJ-200)/100,10)}else{this.numberTicks=2}}}l=au/(this.numberTicks-1)/1000;if(this.daTickInterval==null){this.daTickInterval=[l,"seconds"]}for(var ax=0;ax<this.numberTicks;ax++){var ao=new s.jsDate(this.min);ar=ao.add(ax*this.daTickInterval[0],this.daTickInterval[1]).getTime();var b=new this.tickRenderer(this.tickOptions);if(!this.showTicks){b.showLabel=false;b.showMark=false}else{if(!this.showTickMarks){b.showMark=false}}b.setTick(ar,this.name);this._ticks.push(b)}}}}if(this.tickInset){this.min=this.min-this.tickInset*l;this.max=this.max+this.tickInset*l}if(this._daTickInterval==null){this._daTickInterval=this.daTickInterval}c=null}})(jQuery);