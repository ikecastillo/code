(function(s){var u=function(a){return Math.max.apply(Math,a)};var o=function(a){return Math.min.apply(Math,a)};s.jqplot.BubbleRenderer=function(){s.jqplot.LineRenderer.call(this)};s.jqplot.BubbleRenderer.prototype=new s.jqplot.LineRenderer();s.jqplot.BubbleRenderer.prototype.constructor=s.jqplot.BubbleRenderer;s.jqplot.BubbleRenderer.prototype.init=function(g,j){this.varyBubbleColors=true;this.autoscaleBubbles=true;this.autoscaleMultiplier=1;this.autoscalePointsFactor=-0.07;this.escapeHtml=true;this.highlightMouseOver=true;this.highlightMouseDown=false;this.highlightColors=[];this.bubbleAlpha=1;this.highlightAlpha=null;this.bubbleGradients=false;this.showLabels=true;this.radii=[];this.maxRadius=0;this._highlightedPoint=null;this.labels=[];this.bubbleCanvases=[];this._type="bubble";if(g.highlightMouseDown&&g.highlightMouseOver==null){g.highlightMouseOver=false}s.extend(true,this,g);if(this.highlightAlpha==null){this.highlightAlpha=this.bubbleAlpha;if(this.bubbleGradients){this.highlightAlpha=0.35}}this.autoscaleMultiplier=this.autoscaleMultiplier*Math.pow(this.data.length,this.autoscalePointsFactor);this._highlightedPoint=null;var e;for(var a=0;a<this.data.length;a++){var c=null;var h=this.data[a];this.maxRadius=Math.max(this.maxRadius,h[2]);if(h[3]){if(typeof(h[3])=="object"){c=h[3]["color"]}}if(c==null){if(this.seriesColors[a]!=null){c=this.seriesColors[a]}}if(c&&this.bubbleAlpha<1){e=s.jqplot.getColorComponents(c);c="rgba("+e[0]+", "+e[1]+", "+e[2]+", "+this.bubbleAlpha+")"}if(c){this.seriesColors[a]=c}}if(!this.varyBubbleColors){this.seriesColors=[this.color]}this.colorGenerator=new s.jqplot.ColorGenerator(this.seriesColors);if(this.highlightColors.length==0){for(var a=0;a<this.seriesColors.length;a++){var d=s.jqplot.getColorComponents(this.seriesColors[a]);var i=[d[0],d[1],d[2]];var k=i[0]+i[1]+i[2];for(var b=0;b<3;b++){i[b]=(k>570)?i[b]*0.8:i[b]+0.3*(255-i[b]);i[b]=parseInt(i[b],10)}this.highlightColors.push("rgba("+i[0]+","+i[1]+","+i[2]+", "+this.highlightAlpha+")")}}this.highlightColorGenerator=new s.jqplot.ColorGenerator(this.highlightColors);var f={fill:true,isarc:true,angle:this.shadowAngle,alpha:this.shadowAlpha,closePath:true};this.renderer.shadowRenderer.init(f);this.canvas=new s.jqplot.DivCanvas();this.canvas._plotDimensions=this._plotDimensions;j.eventListenerHooks.addOnce("jqplotMouseMove",x);j.eventListenerHooks.addOnce("jqplotMouseDown",w);j.eventListenerHooks.addOnce("jqplotMouseUp",n);j.eventListenerHooks.addOnce("jqplotClick",r);j.eventListenerHooks.addOnce("jqplotRightClick",m);j.postDrawHooks.addOnce(q)};s.jqplot.BubbleRenderer.prototype.setGridData=function(g){var a=this._xaxis.series_u2p;var e=this._yaxis.series_u2p;var j=this._plotData;this.gridData=[];var k=[];this.radii=[];var h=Math.min(g._height,g._width);for(var i=0;i<this.data.length;i++){if(j[i]!=null){this.gridData.push([a.call(this._xaxis,j[i][0]),e.call(this._yaxis,j[i][1]),j[i][2]]);this.radii.push([i,j[i][2]]);k.push(j[i][2])}}var d,c,f=this.maxRadius=u(k);var b=this.gridData.length;if(this.autoscaleBubbles){for(var i=0;i<b;i++){c=k[i]/f;d=this.autoscaleMultiplier*h/6;this.gridData[i][2]=d*c}}this.radii.sort(function(z,l){return l[1]-z[1]})};s.jqplot.BubbleRenderer.prototype.makeGridData=function(k,h){var a=this._xaxis.series_u2p;var d=this._yaxis.series_u2p;var g=[];var l=[];this.radii=[];var i=Math.min(h._height,h._width);for(var j=0;j<k.length;j++){if(k[j]!=null){g.push([a.call(this._xaxis,k[j][0]),d.call(this._yaxis,k[j][1]),k[j][2]]);l.push(k[j][2]);this.radii.push([j,k[j][2]])}}var e,c,f=this.maxRadius=u(l);var b=this.gridData.length;if(this.autoscaleBubbles){for(var j=0;j<b;j++){c=l[j]/f;e=this.autoscaleMultiplier*i/6;g[j][2]=e*c}}this.radii.sort(function(A,y){return y[1]-A[1]});return g};s.jqplot.BubbleRenderer.prototype.draw=function(l,c,R){if(this.plugins.pointLabels){this.plugins.pointLabels.show=false}var O=(R!=undefined)?R:{};var L=(O.shadow!=undefined)?O.shadow:this.shadow;this.canvas._elem.empty();for(var g=0;g<this.radii.length;g++){var y=this.radii[g][0];var b=null;var h=null;var S=null;var P=null;var d=this.data[y];var c=this.gridData[y];if(d[3]){if(typeof(d[3])=="object"){b=d[3]["label"]}else{if(typeof(d[3])=="string"){b=d[3]}}}h=this.colorGenerator.get(y);var j=c[2];var N,a;if(this.shadow){N=(0.7+c[2]/40).toFixed(1);a=1+Math.ceil(c[2]/15);j+=N*a}this.bubbleCanvases[y]=new s.jqplot.BubbleCanvas();this.canvas._elem.append(this.bubbleCanvases[y].createElement(c[0],c[1],j));this.bubbleCanvases[y].setContext();var l=this.bubbleCanvases[y]._ctx;var i=l.canvas.width/2;var k=l.canvas.height/2;if(this.shadow){this.renderer.shadowRenderer.draw(l,[i,k,c[2],0,2*Math.PI],{offset:N,depth:a})}this.bubbleCanvases[y].draw(c[2],h,this.bubbleGradients,this.shadowAngle/180*Math.PI);if(b&&this.showLabels){P=s('<div style="position:absolute;" class="jqplot-bubble-label"></div>');if(this.escapeHtml){P.text(b)}else{P.html(b)}this.canvas._elem.append(P);var e=s(P).outerHeight();var f=s(P).outerWidth();var M=c[1]-0.5*e;var Q=c[0]-0.5*f;P.css({top:M,left:Q});this.labels[y]=s(P)}}};s.jqplot.DivCanvas=function(){s.jqplot.ElemContainer.call(this);this._ctx};s.jqplot.DivCanvas.prototype=new s.jqplot.ElemContainer();s.jqplot.DivCanvas.prototype.constructor=s.jqplot.DivCanvas;s.jqplot.DivCanvas.prototype.createElement=function(b,e,g){this._offsets=b;var a="jqplot-DivCanvas";if(e!=undefined){a=e}var c;if(this._elem){c=this._elem.get(0)}else{c=document.createElement("div")}if(g!=undefined){this._plotDimensions=g}var f=this._plotDimensions.width-this._offsets.left-this._offsets.right+"px";var d=this._plotDimensions.height-this._offsets.top-this._offsets.bottom+"px";this._elem=s(c);this._elem.css({position:"absolute",width:f,height:d,left:this._offsets.left,top:this._offsets.top});this._elem.addClass(a);return this._elem};s.jqplot.DivCanvas.prototype.setContext=function(){this._ctx={canvas:{width:0,height:0},clearRect:function(){return null}};return this._ctx};s.jqplot.BubbleCanvas=function(){s.jqplot.ElemContainer.call(this);this._ctx};s.jqplot.BubbleCanvas.prototype=new s.jqplot.ElemContainer();s.jqplot.BubbleCanvas.prototype.constructor=s.jqplot.BubbleCanvas;s.jqplot.BubbleCanvas.prototype.createElement=function(g,b,c){var a="jqplot-bubble-point";var d;if(this._elem){d=this._elem.get(0)}else{d=document.createElement("canvas")}d.width=(c!=null)?2*c:d.width;d.height=(c!=null)?2*c:d.height;this._elem=s(d);var f=(g!=null&&c!=null)?g-c:this._elem.css("left");var e=(b!=null&&c!=null)?b-c:this._elem.css("top");this._elem.css({position:"absolute",left:f,top:e});this._elem.addClass(a);if(s.jqplot.use_excanvas){window.G_vmlCanvasManager.init_(document);d=window.G_vmlCanvasManager.initElement(d)}return this._elem};s.jqplot.BubbleCanvas.prototype.draw=function(i,F,l,e){var a=this._ctx;var d=a.canvas.width/2;var j=a.canvas.height/2;a.save();if(l&&!s.jqplot.use_excanvas){i=i*1.04;var g=s.jqplot.getColorComponents(F);var y="rgba("+Math.round(g[0]+0.8*(255-g[0]))+", "+Math.round(g[1]+0.8*(255-g[1]))+", "+Math.round(g[2]+0.8*(255-g[2]))+", "+g[3]+")";var E="rgba("+g[0]+", "+g[1]+", "+g[2]+", 0)";var c=0.35*i;var f=d-Math.cos(e)*0.33*i;var h=j-Math.sin(e)*0.33*i;var k=a.createRadialGradient(f,h,c,d,j,i);k.addColorStop(0,y);k.addColorStop(0.93,F);k.addColorStop(0.96,E);k.addColorStop(1,E);a.fillStyle=k;a.fillRect(0,0,a.canvas.width,a.canvas.height)}else{a.fillStyle=F;a.strokeStyle=F;a.lineWidth=1;a.beginPath();var b=2*Math.PI;a.arc(d,j,i,0,b,0);a.closePath();a.fill()}a.restore()};s.jqplot.BubbleCanvas.prototype.setContext=function(){this._ctx=this._elem.get(0).getContext("2d");return this._ctx};s.jqplot.BubbleAxisRenderer=function(){s.jqplot.LinearAxisRenderer.call(this)};s.jqplot.BubbleAxisRenderer.prototype=new s.jqplot.LinearAxisRenderer();s.jqplot.BubbleAxisRenderer.prototype.constructor=s.jqplot.BubbleAxisRenderer;s.jqplot.BubbleAxisRenderer.prototype.init=function(R){s.extend(true,this,R);var c=this._dataBounds;var f=0,h=0,S=0,b=0,N=0,L=0,J=0,l=0,j=0,a=0;for(var k=0;k<this._series.length;k++){var d=this._series[k];var g=d._plotData;for(var M=0;M<g.length;M++){if(this.name=="xaxis"||this.name=="x2axis"){if(g[M][0]<c.min||c.min==null){c.min=g[M][0];f=k;h=M;L=g[M][2];J=d.maxRadius;a=d.autoscaleMultiplier}if(g[M][0]>c.max||c.max==null){c.max=g[M][0];S=k;b=M;N=g[M][2];l=d.maxRadius;j=d.autoscaleMultiplier}}else{if(g[M][1]<c.min||c.min==null){c.min=g[M][1];f=k;h=M;L=g[M][2];J=d.maxRadius;a=d.autoscaleMultiplier}if(g[M][1]>c.max||c.max==null){c.max=g[M][1];S=k;b=M;N=g[M][2];l=d.maxRadius;j=d.autoscaleMultiplier}}}}var Q=L/J;var e=N/l;var K=c.max-c.min;var P=Math.min(this._plotDimensions.width,this._plotDimensions.height);var O=Q*a/3*K;var i=e*j/3*K;c.max+=i;c.min-=O};function t(b,h,a){b.plugins.bubbleRenderer.highlightLabelCanvas.empty();var f=b.series[h];var d=b.plugins.bubbleRenderer.highlightCanvas;var g=d._ctx;g.clearRect(0,0,g.canvas.width,g.canvas.height);f._highlightedPoint=a;b.plugins.bubbleRenderer.highlightedSeriesIndex=h;var c=f.highlightColorGenerator.get(a);var i=f.gridData[a][0],j=f.gridData[a][1],e=f.gridData[a][2];g.save();g.fillStyle=c;g.strokeStyle=c;g.lineWidth=1;g.beginPath();g.arc(i,j,e,0,2*Math.PI,0);g.closePath();g.fill();g.restore();if(f.labels[a]){b.plugins.bubbleRenderer.highlightLabel=f.labels[a].clone();b.plugins.bubbleRenderer.highlightLabel.appendTo(b.plugins.bubbleRenderer.highlightLabelCanvas);b.plugins.bubbleRenderer.highlightLabel.addClass("jqplot-bubble-label-highlight")}}function p(b){var a=b.plugins.bubbleRenderer.highlightCanvas;var c=b.plugins.bubbleRenderer.highlightedSeriesIndex;b.plugins.bubbleRenderer.highlightLabelCanvas.empty();a._ctx.clearRect(0,0,a._ctx.canvas.width,a._ctx.canvas.height);for(var d=0;d<b.series.length;d++){b.series[d]._highlightedPoint=null}b.plugins.bubbleRenderer.highlightedSeriesIndex=null;b.target.trigger("jqplotDataUnhighlight")}function x(j,c,f,g,a){if(g){var e=g.seriesIndex;var d=g.pointIndex;var b=[e,d,g.data,a.series[e].gridData[d][2]];var i=jQuery.Event("jqplotDataMouseOver");i.pageX=j.pageX;i.pageY=j.pageY;a.target.trigger(i,b);if(a.series[b[0]].highlightMouseOver&&!(b[0]==a.plugins.bubbleRenderer.highlightedSeriesIndex&&b[1]==a.series[b[0]]._highlightedPoint)){var h=jQuery.Event("jqplotDataHighlight");h.which=j.which;h.pageX=j.pageX;h.pageY=j.pageY;a.target.trigger(h,b);t(a,b[0],b[1])}}else{if(g==null){p(a)}}}function w(i,c,f,g,a){if(g){var e=g.seriesIndex;var d=g.pointIndex;var b=[e,d,g.data,a.series[e].gridData[d][2]];if(a.series[b[0]].highlightMouseDown&&!(b[0]==a.plugins.bubbleRenderer.highlightedSeriesIndex&&b[1]==a.series[b[0]]._highlightedPoint)){var h=jQuery.Event("jqplotDataHighlight");h.which=i.which;h.pageX=i.pageX;h.pageY=i.pageY;a.target.trigger(h,b);t(a,b[0],b[1])}}else{if(g==null){p(a)}}}function n(e,f,b,c,d){var a=d.plugins.bubbleRenderer.highlightedSeriesIndex;if(a!=null&&d.series[a].highlightMouseDown){p(d)}}function r(i,c,f,g,a){if(g){var e=g.seriesIndex;var d=g.pointIndex;var b=[e,d,g.data,a.series[e].gridData[d][2]];var h=jQuery.Event("jqplotDataClick");h.which=i.which;h.pageX=i.pageX;h.pageY=i.pageY;a.target.trigger(h,b)}}function m(j,c,f,g,a){if(g){var e=g.seriesIndex;var d=g.pointIndex;var b=[e,d,g.data,a.series[e].gridData[d][2]];var i=a.plugins.bubbleRenderer.highlightedSeriesIndex;if(i!=null&&a.series[i].highlightMouseDown){p(a)}var h=jQuery.Event("jqplotDataRightClick");h.which=j.which;h.pageX=j.pageX;h.pageY=j.pageY;a.target.trigger(h,b)}}function q(){if(this.plugins.bubbleRenderer&&this.plugins.bubbleRenderer.highlightCanvas){this.plugins.bubbleRenderer.highlightCanvas.resetCanvas();this.plugins.bubbleRenderer.highlightCanvas=null}this.plugins.bubbleRenderer={highlightedSeriesIndex:null};this.plugins.bubbleRenderer.highlightCanvas=new s.jqplot.GenericCanvas();this.plugins.bubbleRenderer.highlightLabel=null;this.plugins.bubbleRenderer.highlightLabelCanvas=s('<div style="position:absolute;"></div>');var b=this._gridPadding.top;var c=this._gridPadding.left;var e=this._plotDimensions.width-this._gridPadding.left-this._gridPadding.right;var a=this._plotDimensions.height-this._gridPadding.top-this._gridPadding.bottom;this.plugins.bubbleRenderer.highlightLabelCanvas.css({top:b,left:c,width:e+"px",height:a+"px"});this.eventCanvas._elem.before(this.plugins.bubbleRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-bubbleRenderer-highlight-canvas",this._plotDimensions,this));this.eventCanvas._elem.before(this.plugins.bubbleRenderer.highlightLabelCanvas);var d=this.plugins.bubbleRenderer.highlightCanvas.setContext()}function v(b,c,e){e=e||{};e.axesDefaults=e.axesDefaults||{};e.seriesDefaults=e.seriesDefaults||{};var a=false;if(e.seriesDefaults.renderer==s.jqplot.BubbleRenderer){a=true}else{if(e.series){for(var d=0;d<e.series.length;d++){if(e.series[d].renderer==s.jqplot.BubbleRenderer){a=true}}}}if(a){e.axesDefaults.renderer=s.jqplot.BubbleAxisRenderer;e.sortData=false}}s.jqplot.preInitHooks.push(v)})(jQuery);