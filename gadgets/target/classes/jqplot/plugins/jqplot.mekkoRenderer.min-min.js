(function(c){c.jqplot.MekkoRenderer=function(){this.shapeRenderer=new c.jqplot.ShapeRenderer();this.borderColor=null;this.showBorders=true};c.jqplot.MekkoRenderer.prototype.init=function(f,a){this.fill=false;this.fillRect=true;this.strokeRect=true;this.shadow=false;this._xwidth=0;this._xstart=0;c.extend(true,this.renderer,f);var b={lineJoin:"miter",lineCap:"butt",isarc:false,fillRect:this.fillRect,strokeRect:this.strokeRect};this.renderer.shapeRenderer.init(b);a.axes.x2axis._series.push(this);this._type="mekko"};c.jqplot.MekkoRenderer.prototype.setGridData=function(m){var p=this._xaxis.series_u2p;var r=this._yaxis.series_u2p;var n=this._plotData;this.gridData=[];this._xwidth=p(this._sumy)-p(0);if(this.index>0){this._xstart=m.series[this.index-1]._xstart+m.series[this.index-1]._xwidth}var a=this.canvas.getHeight();var q=0;var b;var i;for(var o=0;o<n.length;o++){if(n[o]!=null){q+=n[o][1];b=a-(q/this._sumy*a);i=n[o][1]/this._sumy*a;this.gridData.push([this._xstart,b,this._xwidth,i])}}};c.jqplot.MekkoRenderer.prototype.makeGridData=function(o,n){var q=this._xaxis.series_u2p;var a=this.canvas.getHeight();var r=0;var i;var m;var b=[];for(var p=0;p<o.length;p++){if(o[p]!=null){r+=o[p][1];i=a-(r/this._sumy*a);m=o[p][1]/this._sumy*a;b.push([this._xstart,i,this._xwidth,m])}}return b};c.jqplot.MekkoRenderer.prototype.draw=function(n,b,m){var l;var i=(m!=undefined)?m:{};var k=(i.showLine!=undefined)?i.showLine:this.showLine;var a=new c.jqplot.ColorGenerator(this.seriesColors);n.save();if(b.length){if(k){for(l=0;l<b.length;l++){i.fillStyle=a.next();if(this.renderer.showBorders){i.strokeStyle=this.renderer.borderColor}else{i.strokeStyle=i.fillStyle}this.renderer.shapeRenderer.draw(n,b[l],i)}}}n.restore()};c.jqplot.MekkoRenderer.prototype.drawShadow=function(f,a,b){};c.jqplot.MekkoLegendRenderer=function(){};c.jqplot.MekkoLegendRenderer.prototype.init=function(a){this.numberRows=null;this.numberColumns=null;this.placement="outside";c.extend(true,this,a)};c.jqplot.MekkoLegendRenderer.prototype.draw=function(){var I=this;if(this.show){var B=this._series;var y="position:absolute;";y+=(this.background)?"background:"+this.background+";":"";y+=(this.border)?"border:"+this.border+";":"";y+=(this.fontSize)?"font-size:"+this.fontSize+";":"";y+=(this.fontFamily)?"font-family:"+this.fontFamily+";":"";y+=(this.textColor)?"color:"+this.textColor+";":"";this._elem=c('<table class="jqplot-table-legend" style="'+y+'"></table>');var b=false,C=true,L,E;var A=B[0];var K=new c.jqplot.ColorGenerator(A.seriesColors);if(A.show){var a=A.data;if(this.numberRows){L=this.numberRows;if(!this.numberColumns){E=Math.ceil(a.length/L)}else{E=this.numberColumns}}else{if(this.numberColumns){E=this.numberColumns;L=Math.ceil(a.length/this.numberColumns)}else{L=a.length;E=1}}var i,j,J,G,H,F,D,s;var z=0;for(i=0;i<L;i++){if(C){J=c('<tr class="jqplot-table-legend"></tr>').prependTo(this._elem)}else{J=c('<tr class="jqplot-table-legend"></tr>').appendTo(this._elem)}for(j=0;j<E;j++){if(z<a.length){F=this.labels[z]||a[z][0].toString();s=K.next();if(!C){if(i>0){b=true}else{b=false}}else{if(i==L-1){b=false}else{b=true}}D=(b)?this.rowSpacing:"0";G=c('<td class="jqplot-table-legend" style="text-align:center;padding-top:'+D+';"><div><div class="jqplot-table-legend-swatch" style="border-color:'+s+';"></div></div></td>');H=c('<td class="jqplot-table-legend" style="padding-top:'+D+';"></td>');if(this.escapeHtml){H.text(F)}else{H.html(F)}if(C){H.prependTo(J);G.prependTo(J)}else{G.appendTo(J);H.appendTo(J)}b=true}z++}}J=null;G=null;H=null}}return this._elem};c.jqplot.MekkoLegendRenderer.prototype.pack=function(a){if(this.show){var b={_top:a.top,_left:a.left,_right:a.right,_bottom:this._plotDimensions.height-a.bottom};if(this.placement=="insideGrid"){switch(this.location){case"nw":var g=b._left+this.xoffset;var h=b._top+this.yoffset;this._elem.css("left",g);this._elem.css("top",h);break;case"n":var g=(a.left+(this._plotDimensions.width-a.right))/2-this.getWidth()/2;var h=b._top+this.yoffset;this._elem.css("left",g);this._elem.css("top",h);break;case"ne":var g=a.right+this.xoffset;var h=b._top+this.yoffset;this._elem.css({right:g,top:h});break;case"e":var g=a.right+this.xoffset;var h=(a.top+(this._plotDimensions.height-a.bottom))/2-this.getHeight()/2;this._elem.css({right:g,top:h});break;case"se":var g=a.right+this.xoffset;var h=a.bottom+this.yoffset;this._elem.css({right:g,bottom:h});break;case"s":var g=(a.left+(this._plotDimensions.width-a.right))/2-this.getWidth()/2;var h=a.bottom+this.yoffset;this._elem.css({left:g,bottom:h});break;case"sw":var g=b._left+this.xoffset;var h=a.bottom+this.yoffset;this._elem.css({left:g,bottom:h});break;case"w":var g=b._left+this.xoffset;var h=(a.top+(this._plotDimensions.height-a.bottom))/2-this.getHeight()/2;this._elem.css({left:g,top:h});break;default:var g=b._right-this.xoffset;var h=b._bottom+this.yoffset;this._elem.css({right:g,bottom:h});break}}else{switch(this.location){case"nw":var g=this._plotDimensions.width-b._left+this.xoffset;var h=b._top+this.yoffset;this._elem.css("right",g);this._elem.css("top",h);break;case"n":var g=(a.left+(this._plotDimensions.width-a.right))/2-this.getWidth()/2;var h=this._plotDimensions.height-b._top+this.yoffset;this._elem.css("left",g);this._elem.css("bottom",h);break;case"ne":var g=this._plotDimensions.width-a.right+this.xoffset;var h=b._top+this.yoffset;this._elem.css({left:g,top:h});break;case"e":var g=this._plotDimensions.width-a.right+this.xoffset;var h=(a.top+(this._plotDimensions.height-a.bottom))/2-this.getHeight()/2;this._elem.css({left:g,top:h});break;case"se":var g=this._plotDimensions.width-a.right+this.xoffset;var h=a.bottom+this.yoffset;this._elem.css({left:g,bottom:h});break;case"s":var g=(a.left+(this._plotDimensions.width-a.right))/2-this.getWidth()/2;var h=this._plotDimensions.height-a.bottom+this.yoffset;this._elem.css({left:g,top:h});break;case"sw":var g=this._plotDimensions.width-b._left+this.xoffset;var h=a.bottom+this.yoffset;this._elem.css({right:g,bottom:h});break;case"w":var g=this._plotDimensions.width-b._left+this.xoffset;var h=(a.top+(this._plotDimensions.height-a.bottom))/2-this.getHeight()/2;this._elem.css({right:g,top:h});break;default:var g=b._right-this.xoffset;var h=b._bottom+this.yoffset;this._elem.css({right:g,bottom:h});break}}}};function d(a,b,i){i=i||{};i.axesDefaults=i.axesDefaults||{};i.legend=i.legend||{};i.seriesDefaults=i.seriesDefaults||{};var j=false;if(i.seriesDefaults.renderer==c.jqplot.MekkoRenderer){j=true}else{if(i.series){for(var h=0;h<i.series.length;h++){if(i.series[h].renderer==c.jqplot.MekkoRenderer){j=true}}}}if(j){i.axesDefaults.renderer=c.jqplot.MekkoAxisRenderer;i.legend.renderer=c.jqplot.MekkoLegendRenderer;i.legend.preDraw=true}}c.jqplot.preInitHooks.push(d)})(jQuery);