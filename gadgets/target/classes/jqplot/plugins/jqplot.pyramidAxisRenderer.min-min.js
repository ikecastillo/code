(function(h){h.jqplot.PyramidAxisRenderer=function(){h.jqplot.LinearAxisRenderer.call(this)};h.jqplot.PyramidAxisRenderer.prototype=new h.jqplot.LinearAxisRenderer();h.jqplot.PyramidAxisRenderer.prototype.constructor=h.jqplot.PyramidAxisRenderer;h.jqplot.PyramidAxisRenderer.prototype.init=function(a){this.position=null;this.drawBaseline=true;this.baselineWidth=null;this.baselineColor=null;this.tickSpacingFactor=25;this._type="pyramid";this._splitAxis=false;this._splitLength=null;this.category=false;this._autoFormatString="";this._overrideFormatString=false;h.extend(true,this,a);this.renderer.options=a;this.resetDataBounds=this.renderer.resetDataBounds;this.resetDataBounds()};h.jqplot.PyramidAxisRenderer.prototype.resetDataBounds=function(){var c=this._dataBounds;c.min=null;c.max=null;var d;for(var a=0;a<this._series.length;a++){var p=this._series[a];var l=p._plotData;for(var b=0,e=l.length;b<e;b++){if(this.name.charAt(0)==="x"){d=l[b][1];if((d!==null&&d<c.min)||c.min===null){c.min=d}if((d!==null&&d>c.max)||c.max===null){c.max=d}}else{d=l[b][0];if((d!==null&&d<c.min)||c.min===null){c.min=d}if((d!==null&&d>c.max)||c.max===null){c.max=d}}}}};h.jqplot.PyramidAxisRenderer.prototype.draw=function(p,q){if(this.show){this.renderer.createTicks.call(this,q);var a=0;var o;if(this._elem){this._elem.emptyForce();this._elem=null}this._elem=h(document.createElement("div"));this._elem.addClass("jqplot-axis jqplot-"+this.name);this._elem.css("position","absolute");if(this.name=="xaxis"||this.name=="x2axis"){this._elem.width(this._plotDimensions.width)}else{this._elem.height(this._plotDimensions.height)}this.labelOptions.axis=this.name;this._label=new this.labelRenderer(this.labelOptions);if(this._label.show){var b=this._label.draw(p,q);b.appendTo(this._elem);b=null}var c=this._ticks;var d;for(var e=0;e<c.length;e++){d=c[e];if(d.show&&d.showLabel&&(!d.isMinorTick)){this._elem.append(d.draw(p,q))}}d=null;c=null}return this._elem};var f=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];var i={};for(var j=0,g=f.length;j<g;j++){i[f[j]]=f[j]}h.jqplot.PyramidAxisRenderer.prototype.createTicks=function(aa){var t=this.ticks;var d=this._dataBounds;var Z;var s;var ad;var W;var Q;var ai;var ak;var am;var U;var ac;var S;var e=this.min;var c=this.max;var ae;var V;var aj;var an;var al;var b;var ag;var Y;var ab;var a;var l=null;var R;if(t.length){for(U=0,ac=t.length;U<ac;U++){ae=t[U];V=new this.tickRenderer(this.tickOptions);if(h.isArray(ae)){V.value=ae[0];V.label=ae[1];V.setTick(ae[0],this.name);this._ticks.push(V)}else{if(h.isPlainObject(ae)){h.extend(true,V,ae);V.axis=this.name;this._ticks.push(V)}else{if(typeof ae==="string"){a=U+aa.defaultAxisStart}else{a=ae}V.value=a;V.label=ae;V.axis=this.name;this._ticks.push(V)}}}this.numberTicks=t.length;this.min=this._ticks[0].value;this.max=this._ticks[this.numberTicks-1].value;this.tickInterval=(this.max-this.min)/(this.numberTicks-1);if(this._options.tickInterval){var ah=this._options.tickInterval;for(U=0;U<this.numberTicks;U++){if(U%ah!==0){this._ticks[U].isMinorTick=true}}}else{Z=(this.name.charAt(0)==="x")?this._plotDimensions.width:this._plotDimensions.height;ab=Math.round(2+Z/this.tickSpacingFactor);if(this.numberTicks>ab){R=this.numberTicks-1;for(U=2;U<R;U++){if(R%U===0&&R/U<ab){l=U-1;break}}if(l!==null){var af=1;for(U=1,ac=this._ticks.length;U<ac;U++){if(af<=l){this._ticks[U].show=false;af+=1}else{af=1}}}}}R=[];if(this.category){this._ticks[0].showGridline=false;this._ticks[0].showMark=false;for(U=this._ticks.length-1;U>0;U--){V=new this.tickRenderer(this.tickOptions);V.value=this._ticks[U-1].value+this.tickInterval/2;V.label="";V.showLabel=false;V.axis=this.name;this._ticks[U].showGridline=false;this._ticks[U].showMark=false;this._ticks.splice(U,0,V)}V=new this.tickRenderer(this.tickOptions);V.value=this._ticks[0].value-this.tickInterval/2;V.label="";V.showLabel=false;V.axis=this.name;this._ticks.unshift(V);V=new this.tickRenderer(this.tickOptions);V.value=this._ticks[this._ticks.length-1].value+this.tickInterval/2;V.label="";V.showLabel=false;V.axis=this.name;this._ticks.push(V);this.tickInterval=this.tickInterval/2;this.numberTicks=this._ticks.length;this.min=this._ticks[0].value;this.max=this._ticks[this._ticks.length-1].value}}else{if(this.name.charAt(0)==="x"){Z=this._plotDimensions.width;var T=Math.max(d.max,Math.abs(d.min));var X=Math.min(d.min,-T);ad=X;W=T;Q=W-ad;if(this.tickOptions==null||!this.tickOptions.formatString){this._overrideFormatString=true}aj=30;an=Math.max(Z,aj+1);al=(an-aj)/300;b=h.jqplot.LinearTickGenerator(ad,W,al);ag=ad+Q*(this.padMin-1);Y=W-Q*(this.padMax-1);if(ad<ag||W>Y){ag=ad-Q*(this.padMin-1);Y=W+Q*(this.padMax-1);b=h.jqplot.LinearTickGenerator(ag,Y,al)}this.min=b[0];this.max=b[1];this.numberTicks=b[2];this._autoFormatString=b[3];this.tickInterval=b[4]}else{Z=this._plotDimensions.height;ad=d.min;W=d.max;S=this._series[0];this._ticks=[];Q=W-ad;if(i[Q]){Q+=1;W+=1}this.max=W;this.min=ad;ab=Math.round(2+Z/this.tickSpacingFactor);if(Q+1<=ab){this.numberTicks=Q+1;this.tickInterval=1}else{for(var U=ab;U>1;U--){if(Q/(U-1)===Math.round(Q/(U-1))){this.numberTicks=U;this.tickInterval=Q/(U-1);break}}}}if(this._overrideFormatString&&this._autoFormatString!=""){this.tickOptions=this.tickOptions||{};this.tickOptions.formatString=this._autoFormatString}var ao;for(U=0;U<this.numberTicks;U++){this.tickOptions.axis=this.name;ao=this.min+this.tickInterval*U;if(this.name.charAt(0)==="x"){ao=Math.abs(ao)}this.tickOptions.value=this.min+this.tickInterval*U;V=new this.tickRenderer(this.tickOptions);V.label=V.prefix+V.formatter(V.formatString,ao);this._ticks.push(V);if(this.name.charAt(0)==="x"&&aa.axes.yMidAxis.show&&this.tickOptions.value===0){this._splitAxis=true;this._splitLength=aa.axes.yMidAxis.getWidth();V=new this.tickRenderer(this.tickOptions);this._ticks.push(V);V.value=this.max/2000}}V=null}};h.jqplot.PyramidAxisRenderer.prototype.set=function(){var q=0;var d;var e=0;var r=0;var a;var b;var c;var p=(this._label==null)?false:this._label.show;if(this.show){b=this._ticks;g=b.length;for(a=0;a<g;a++){c=b[a];if(!c._breakTick&&c.show&&c.showLabel&&!c.isMinorTick){if(this.name.charAt(0)==="x"){d=c._elem.outerHeight(true)}else{d=c._elem.outerWidth(true)}if(d>q){q=d}}}if(this.name==="yMidAxis"){for(a=0;a<g;a++){c=b[a];if(c._elem){d=(q-c._elem.outerWidth(true))/2;c._elem.css("left",d)}}}c=null;b=null;if(p){e=this._label._elem.outerWidth(true);r=this._label._elem.outerHeight(true)}if(this.name==="xaxis"){q=q+r;this._elem.css({height:q+"px",left:"0px",bottom:"0px"})}else{if(this.name==="x2axis"){q=q+r;this._elem.css({height:q+"px",left:"0px",top:"0px"})}else{if(this.name==="yaxis"){q=q+e;this._elem.css({width:q+"px",left:"0px",top:"0px"});if(p&&this._label.constructor==h.jqplot.AxisLabelRenderer){this._label._elem.css("width",e+"px")}}else{if(this.name==="yMidAxis"){var d=q/2-e/2;this._elem.css({width:q+"px",top:"0px"});if(p&&this._label.constructor==h.jqplot.AxisLabelRenderer){this._label._elem.css({width:e,left:d,top:0})}}else{q=q+e;this._elem.css({width:q+"px",right:"0px",top:"0px"});if(p&&this._label.constructor==h.jqplot.AxisLabelRenderer){this._label._elem.css("width",e+"px")}}}}}}};h.jqplot.PyramidAxisRenderer.prototype.pack=function(L,M){L=L||{};M=M||this._offsets;var D=this._ticks;var d=this.max;var e=this.min;var G=M.max;var I=M.min;var w=(this._label==null)?false:this._label.show;for(var p in L){this._elem.css(p,L[p])}this._offsets=M;var K=G-I;var J=d-e;var a=this._splitLength;if(this._splitAxis){K-=this._splitLength;this.p2u=function(k){return(k-I)*J/K+e};this.u2p=function(k){if(k<=0){return(k-e)*K/J+I}else{return(k-e)*K/J+I+a}};this.series_u2p=function(k){if(k<=0){return(k-e)*K/J}else{return(k-e)*K/J+a}};this.series_p2u=function(k){return k*J/K+e}}else{this.p2u=function(k){return(k-I)*J/K+e};this.u2p=function(k){return(k-e)*K/J+I};if(this.name.charAt(0)==="x"){this.series_u2p=function(k){return(k-e)*K/J};this.series_p2u=function(k){return k*J/K+e}}else{this.series_u2p=function(k){return(k-d)*K/J};this.series_p2u=function(k){return k*J/K+d}}}if(this.show){if(this.name.charAt(0)==="x"){for(var c=0;c<D.length;c++){var E=D[c];if(E.show&&E.showLabel){var N;if(E.constructor==h.jqplot.CanvasAxisTickRenderer&&E.angle){var F=(this.name=="xaxis")?1:-1;switch(E.labelPosition){case"auto":if(F*E.angle<0){N=-E.getWidth()+E._textRenderer.height*Math.sin(-E._textRenderer.angle)/2}else{N=-E._textRenderer.height*Math.sin(E._textRenderer.angle)/2}break;case"end":N=-E.getWidth()+E._textRenderer.height*Math.sin(-E._textRenderer.angle)/2;break;case"start":N=-E._textRenderer.height*Math.sin(E._textRenderer.angle)/2;break;case"middle":N=-E.getWidth()/2+E._textRenderer.height*Math.sin(-E._textRenderer.angle)/2;break;default:N=-E.getWidth()/2+E._textRenderer.height*Math.sin(-E._textRenderer.angle)/2;break}}else{N=-E.getWidth()/2}var t=this.u2p(E.value)+N+"px";E._elem.css("left",t);E.pack()}}if(w){var H=this._label._elem.outerWidth(true);this._label._elem.css("left",I+K/2-H/2+"px");if(this.name=="xaxis"){this._label._elem.css("bottom","0px")}else{this._label._elem.css("top","0px")}this._label.pack()}}else{for(var c=0;c<D.length;c++){var E=D[c];if(E.show&&E.showLabel&&!E.isMinorTick){var N;if(E.constructor==h.jqplot.CanvasAxisTickRenderer&&E.angle){var F=(this.name=="yaxis")?1:-1;switch(E.labelPosition){case"auto":case"end":if(F*E.angle<0){N=-E._textRenderer.height*Math.cos(-E._textRenderer.angle)/2}else{N=-E.getHeight()+E._textRenderer.height*Math.cos(E._textRenderer.angle)/2}break;case"start":if(E.angle>0){N=-E._textRenderer.height*Math.cos(-E._textRenderer.angle)/2}else{N=-E.getHeight()+E._textRenderer.height*Math.cos(E._textRenderer.angle)/2}break;case"middle":N=-E.getHeight()/2;break;default:N=-E.getHeight()/2;break}}else{N=-E.getHeight()/2}var t=this.u2p(E.value)+N+"px";E._elem.css("top",t);E.pack()}}if(w){var b=this._label._elem.outerHeight(true);if(this.name!=="yMidAxis"){this._label._elem.css("top",G-K/2-b/2+"px")}if(this.name=="yaxis"){this._label._elem.css("left","0px")}else{if(this.name!=="yMidAxis"){this._label._elem.css("right","0px")}}this._label.pack()}}}D=null}})(jQuery);