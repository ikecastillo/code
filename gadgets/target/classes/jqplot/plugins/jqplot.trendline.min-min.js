(function(m){m.jqplot.Trendline=function(){this.show=m.jqplot.config.enablePlugins;this.color="#666666";this.renderer=new m.jqplot.LineRenderer();this.rendererOptions={marker:{show:false}};this.label="";this.type="linear";this.shadow=true;this.markerRenderer={show:false};this.lineWidth=1.5;this.shadowAngle=45;this.shadowOffset=1;this.shadowAlpha=0.07;this.shadowDepth=3;this.isTrendline=true};m.jqplot.postSeriesInitHooks.push(n);m.jqplot.postDrawSeriesHooks.push(l);m.jqplot.addLegendRowHooks.push(j);function j(a){var b=null;if(a.trendline&&a.trendline.show){var c=a.trendline.label.toString();if(c){b={label:c,color:a.trendline.color}}}return b}function n(a,c,d,e,b){if(this._type&&(this._type==="line"||this._type=="bar")){this.trendline=new m.jqplot.Trendline();e=e||{};m.extend(true,this.trendline,{color:this.color},d.trendline,e.trendline);this.trendline.renderer.init.call(this.trendline,null)}}function l(a,e){e=m.extend(true,{},this.trendline,e);if(this.trendline&&e.show){var c;var b=e.data||this.data;c=p(b,this.trendline.type);var d=e.gridData||this.renderer.makeGridData.call(this,c.data);this.trendline.renderer.draw.call(this.trendline,a,d,{showLine:true,shadow:this.trendline.shadow})}}function i(A,B,e){var C=(e==null)?"linear":e;var E=A.length;var D;var y;var d=0;var f=0;var a=0;var b=0;var g=0;var x=[];var h=[];if(C=="linear"){h=A;x=B}else{if(C=="exp"||C=="exponential"){for(var c=0;c<B.length;c++){if(B[c]<=0){E--}else{h.push(A[c]);x.push(Math.log(B[c]))}}}}for(var c=0;c<E;c++){d=d+h[c];f=f+x[c];b=b+h[c]*x[c];a=a+h[c]*h[c];g=g+x[c]*x[c]}D=(E*b-d*f)/(E*a-d*d);y=(f-D*d)/E;return[D,y]}function k(a,b){var c;c=i(a,b,"linear");return[c[0],c[1]]}function o(f,a){var c;var e=f;var g=a;c=i(e,g,"exp");var b=Math.exp(c[0]);var d=Math.exp(c[1]);return[b,d]}function p(g,s){var c=(s==null)?"linear":s;var e;var d;var a=[];var b=[];var f=[];for(h=0;h<g.length;h++){if(g[h]!=null&&g[h][0]!=null&&g[h][1]!=null){a.push(g[h][0]);b.push(g[h][1])}}if(c=="linear"){e=k(a,b);for(var h=0;h<a.length;h++){d=e[0]*a[h]+e[1];f.push([a[h],d])}}else{if(c=="exp"||c=="exponential"){e=o(a,b);for(var h=0;h<a.length;h++){d=e[1]*Math.pow(e[0],a[h]);f.push([a[h],d])}}}return{data:f,slope:e[0],intercept:e[1]}}})(jQuery);