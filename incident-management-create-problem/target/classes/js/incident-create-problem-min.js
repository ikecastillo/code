AJS.toInit(function(){Mapper.getAllFieldMappings();AJS.$("#dialog-show-button").click(function(){AJS.dialog2("#demo-dialog").show()});AJS.$("#dialog-close-button").click(function(b){b.preventDefault();AJS.dialog2("#demo-dialog").hide()});AJS.$("#mapping-dialog-save-button").click(function(){if(a()){Mapper.addMapping();AJS.dialog2("#demo-dialog").hide()}});AJS.$(".deleteIssueMapping").live("click",function(){var c=AJS.$(this).closest("tr");var b=[];AJS.$(this).closest("tr").find("td").each(function(){b.push(AJS.$(this).text())});AJS.log("Field to delete for 1 "+b[0]);AJS.log("Field to delete for 2 "+b[1]);AJS.log("Field to delete for 3 "+b[2]);AJS.log("Field to delete for 4 "+b[3]);AJS.log("Delete Mapping dialog pops up");AJS.dialog2("#delete-dialog").show();AJS.$("#srcIssueFieldConf").text(b[0]);AJS.$("#destIssueFieldConf").text(b[1]);AJS.$("#srcIssueTypeConf").text(b[2]);AJS.$("#destIssueTypeConf").text(b[3])});AJS.$("#mapping-dialog-delete-cancel-link").click(function(b){b.preventDefault();AJS.dialog2("#delete-dialog").hide()});AJS.$("#mapping-dialog-delete-button").click(function(){Mapper.removeMapping(AJS.$("#srcIssueFieldConf").text(),AJS.$("#destIssueFieldConf").text(),AJS.$("#srcIssueTypeConf").text(),AJS.$("#destIssueTypeConf").text());AJS.dialog2("#delete-dialog").hide()});function a(){var e,c;AJS.$(".error").html("");var d=AJS.$("#selectedDefaultIssueFields").val();var b=AJS.$("#mappingfield").val();if(!d){c=AJS.I18n.getText("create-and-link-issue.admin.mappingform.dialog.errorjiraField")}if(!b){e=AJS.I18n.getText("create-and-link-issue.admin.mappingform.dialog.errormappingField")}if(c){AJS.$("#selectedDefaultIssueFields").focus().siblings(".error").html(c);return false}if(e){AJS.$("#mappingfield").focus().siblings(".error").html(e);return false}return true}});