(function(b){b.jqplot.OHLCRenderer=function(){b.jqplot.LineRenderer.call(this);this.candleStick=false;this.tickLength="auto";this.bodyWidth="auto";this.openColor=null;this.closeColor=null;this.wickColor=null;this.fillUpBody=false;this.fillDownBody=true;this.upBodyColor=null;this.downBodyColor=null;this.hlc=false;this.lineWidth=1.5;this._tickLength;this._bodyWidth};b.jqplot.OHLCRenderer.prototype=new b.jqplot.LineRenderer();b.jqplot.OHLCRenderer.prototype.constructor=b.jqplot.OHLCRenderer;b.jqplot.OHLCRenderer.prototype.init=function(g){g=g||{};this.lineWidth=g.lineWidth||1.5;b.jqplot.LineRenderer.prototype.init.call(this,g);this._type="ohlc";var a=this._yaxis._dataBounds;var d=this._plotData;if(d[0].length<5){this.renderer.hlc=true;for(var h=0;h<d.length;h++){if(d[h][2]<a.min||a.min==null){a.min=d[h][2]}if(d[h][1]>a.max||a.max==null){a.max=d[h][1]}}}else{for(var h=0;h<d.length;h++){if(d[h][3]<a.min||a.min==null){a.min=d[h][3]}if(d[h][2]>a.max||a.max==null){a.max=d[h][2]}}}};b.jqplot.OHLCRenderer.prototype.draw=function(af,h,al){var R=this.data;var V=this._xaxis.min;var w=this._xaxis.max;var aj=0;var r=R.length;var ag=this._xaxis.series_u2p;var U=this._yaxis.series_u2p;var ab,Z,an,i,X,ah,e,ac;var x;var W=this.renderer;var aa=(al!=undefined)?al:{};var ak=(aa.shadow!=undefined)?aa.shadow:this.shadow;var ae=(aa.fill!=undefined)?aa.fill:this.fill;var ao=(aa.fillAndStroke!=undefined)?aa.fillAndStroke:this.fillAndStroke;W.bodyWidth=(aa.bodyWidth!=undefined)?aa.bodyWidth:W.bodyWidth;W.tickLength=(aa.tickLength!=undefined)?aa.tickLength:W.tickLength;af.save();if(this.show){var ai,ad,am,a,Y;for(var ab=0;ab<R.length;ab++){if(R[ab][0]<V){aj=ab}else{if(R[ab][0]<w){r=ab+1}}}var S=this.gridData[r-1][0]-this.gridData[aj][0];var o=r-aj;try{var d=Math.abs(this._xaxis.series_u2p(parseInt(this._xaxis._intervalStats[0].sortedIntervals[0].interval,10))-this._xaxis.series_u2p(0))}catch(T){var d=S/o}if(W.candleStick){if(typeof(W.bodyWidth)=="number"){W._bodyWidth=W.bodyWidth}else{W._bodyWidth=Math.min(20,d/1.65)}}else{if(typeof(W.tickLength)=="number"){W._tickLength=W.tickLength}else{W._tickLength=Math.min(10,d/3.5)}}for(var ab=aj;ab<r;ab++){ai=ag(R[ab][0]);if(W.hlc){ad=null;am=U(R[ab][1]);a=U(R[ab][2]);Y=U(R[ab][3])}else{ad=U(R[ab][1]);am=U(R[ab][2]);a=U(R[ab][3]);Y=U(R[ab][4])}x={};if(W.candleStick&&!W.hlc){ah=W._bodyWidth;e=ai-ah/2;if(Y<ad){if(W.wickColor){x.color=W.wickColor}else{if(W.downBodyColor){x.color=W.upBodyColor}}an=b.extend(true,{},aa,x);W.shapeRenderer.draw(af,[[ai,am],[ai,Y]],an);W.shapeRenderer.draw(af,[[ai,ad],[ai,a]],an);x={};i=Y;X=ad-Y;if(W.fillUpBody){x.fillRect=true}else{x.strokeRect=true;ah=ah-this.lineWidth;e=ai-ah/2}if(W.upBodyColor){x.color=W.upBodyColor;x.fillStyle=W.upBodyColor}ac=[e,i,ah,X]}else{if(Y>ad){if(W.wickColor){x.color=W.wickColor}else{if(W.downBodyColor){x.color=W.downBodyColor}}an=b.extend(true,{},aa,x);W.shapeRenderer.draw(af,[[ai,am],[ai,ad]],an);W.shapeRenderer.draw(af,[[ai,Y],[ai,a]],an);x={};i=ad;X=Y-ad;if(W.fillDownBody){x.fillRect=true}else{x.strokeRect=true;ah=ah-this.lineWidth;e=ai-ah/2}if(W.downBodyColor){x.color=W.downBodyColor;x.fillStyle=W.downBodyColor}ac=[e,i,ah,X]}else{if(W.wickColor){x.color=W.wickColor}an=b.extend(true,{},aa,x);W.shapeRenderer.draw(af,[[ai,am],[ai,a]],an);x={};x.fillRect=false;x.strokeRect=false;e=[ai-ah/2,ad];i=[ai+ah/2,Y];ah=null;X=null;ac=[e,i]}}an=b.extend(true,{},aa,x);W.shapeRenderer.draw(af,ac,an)}else{Z=aa.color;if(W.openColor){aa.color=W.openColor}if(!W.hlc){W.shapeRenderer.draw(af,[[ai-W._tickLength,ad],[ai,ad]],aa)}aa.color=Z;if(W.wickColor){aa.color=W.wickColor}W.shapeRenderer.draw(af,[[ai,am],[ai,a]],aa);aa.color=Z;if(W.closeColor){aa.color=W.closeColor}W.shapeRenderer.draw(af,[[ai,Y],[ai+W._tickLength,Y]],aa);aa.color=Z}}}af.restore()};b.jqplot.OHLCRenderer.prototype.drawShadow=function(a,e,f){};b.jqplot.OHLCRenderer.checkOptions=function(e,f,a){if(!a.highlighter){a.highlighter={showMarker:false,tooltipAxes:"y",yvalues:4,formatString:'<table class="jqplot-highlighter"><tr><td>date:</td><td>%s</td></tr><tr><td>open:</td><td>%s</td></tr><tr><td>hi:</td><td>%s</td></tr><tr><td>low:</td><td>%s</td></tr><tr><td>close:</td><td>%s</td></tr></table>'}}}})(jQuery);