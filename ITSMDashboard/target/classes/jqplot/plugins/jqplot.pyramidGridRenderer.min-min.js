(function(b){b.jqplot.PyramidGridRenderer=function(){b.jqplot.CanvasGridRenderer.call(this)};b.jqplot.PyramidGridRenderer.prototype=new b.jqplot.CanvasGridRenderer();b.jqplot.PyramidGridRenderer.prototype.constructor=b.jqplot.PyramidGridRenderer;b.jqplot.CanvasGridRenderer.prototype.init=function(d){this._ctx;this.plotBands={show:false,color:"rgb(230, 219, 179)",axis:"y",start:null,interval:10};b.extend(true,this,d);var a={lineJoin:"miter",lineCap:"round",fill:false,isarc:false,angle:this.shadowAngle,offset:this.shadowOffset,alpha:this.shadowAlpha,depth:this.shadowDepth,lineWidth:this.shadowWidth,closePath:false,strokeStyle:this.shadowColor};this.renderer.shadowRenderer.init(a)};b.jqplot.PyramidGridRenderer.prototype.draw=function(){this._ctx=this._elem.get(0).getContext("2d");var S=this._ctx;var y=this._axes;var W=y.xaxis.u2p;var s=y.yMidAxis.u2p;var ab=y.xaxis.max/1000;var Q=W(0);var ae=W(ab);var U=["xaxis","yaxis","x2axis","y2axis","yMidAxis"];S.save();S.clearRect(0,0,this._plotDimensions.width,this._plotDimensions.height);S.fillStyle=this.backgroundColor||this.background;S.fillRect(this._left,this._top,this._width,this._height);if(this.plotBands.show){S.save();var ag=this.plotBands;S.fillStyle=ag.color;var af;var Z,aa,Y,t;if(ag.axis.charAt(0)==="x"){if(y.xaxis.show){af=y.xaxis}}else{if(ag.axis.charAt(0)==="y"){if(y.yaxis.show){af=y.yaxis}else{if(y.y2axis.show){af=y.y2axis}else{if(y.yMidAxis.show){af=y.yMidAxis}}}}}if(af!==undefined){var ad=ag.start;if(ad===null){ad=af.min}for(var w=ad;w<af.max;w+=2*ag.interval){if(af.name.charAt(0)==="y"){Z=this._left;if((w+ag.interval)<af.max){aa=af.series_u2p(w+ag.interval)+this._top}else{aa=af.series_u2p(af.max)+this._top}Y=this._right-this._left;t=af.series_u2p(ad)-af.series_u2p(ad+ag.interval);S.fillRect(Z,aa,Y,t)}}}S.restore()}S.save();S.lineJoin="miter";S.lineCap="butt";S.lineWidth=this.gridLineWidth;S.strokeStyle=this.gridLineColor;var i,m,X,T;for(var w=5;w>0;w--){var a=U[w-1];var af=y[a];var h=af._ticks;var V=h.length;if(af.show){if(af.drawBaseline){var e={};if(af.baselineWidth!==null){e.lineWidth=af.baselineWidth}if(af.baselineColor!==null){e.strokeStyle=af.baselineColor}switch(a){case"xaxis":if(y.yMidAxis.show){j(this._left,this._bottom,Q,this._bottom,e);j(ae,this._bottom,this._right,this._bottom,e)}else{j(this._left,this._bottom,this._right,this._bottom,e)}break;case"yaxis":j(this._left,this._bottom,this._left,this._top,e);break;case"yMidAxis":j(Q,this._bottom,Q,this._top,e);j(ae,this._bottom,ae,this._top,e);break;case"x2axis":if(y.yMidAxis.show){j(this._left,this._top,Q,this._top,e);j(ae,this._top,this._right,this._top,e)}else{j(this._left,this._bottom,this._right,this._bottom,e)}break;case"y2axis":j(this._right,this._bottom,this._right,this._top,e);break}}for(var R=V;R>0;R--){var x=h[R-1];if(x.show){var ac=Math.round(af.u2p(x.value))+0.5;switch(a){case"xaxis":if(x.showGridline&&this.drawGridlines&&(!x.isMinorTick||af.showMinorTicks)){j(ac,this._top,ac,this._bottom)}if(x.showMark&&x.mark&&(!x.isMinorTick||af.showMinorTicks)){X=x.markSize;T=x.mark;var ac=Math.round(af.u2p(x.value))+0.5;switch(T){case"outside":i=this._bottom;m=this._bottom+X;break;case"inside":i=this._bottom-X;m=this._bottom;break;case"cross":i=this._bottom-X;m=this._bottom+X;break;default:i=this._bottom;m=this._bottom+X;break}if(this.shadow){this.renderer.shadowRenderer.draw(S,[[ac,i],[ac,m]],{lineCap:"butt",lineWidth:this.gridLineWidth,offset:this.gridLineWidth*0.75,depth:2,fill:false,closePath:false})}j(ac,i,ac,m)}break;case"yaxis":if(x.showGridline&&this.drawGridlines&&(!x.isMinorTick||af.showMinorTicks)){j(this._right,ac,this._left,ac)}if(x.showMark&&x.mark&&(!x.isMinorTick||af.showMinorTicks)){X=x.markSize;T=x.mark;var ac=Math.round(af.u2p(x.value))+0.5;switch(T){case"outside":i=this._left-X;m=this._left;break;case"inside":i=this._left;m=this._left+X;break;case"cross":i=this._left-X;m=this._left+X;break;default:i=this._left-X;m=this._left;break}if(this.shadow){this.renderer.shadowRenderer.draw(S,[[i,ac],[m,ac]],{lineCap:"butt",lineWidth:this.gridLineWidth*1.5,offset:this.gridLineWidth*0.75,fill:false,closePath:false})}j(i,ac,m,ac,{strokeStyle:af.borderColor})}break;case"yMidAxis":if(x.showGridline&&this.drawGridlines&&(!x.isMinorTick||af.showMinorTicks)){j(this._left,ac,Q,ac);j(ae,ac,this._right,ac)}if(x.showMark&&x.mark&&(!x.isMinorTick||af.showMinorTicks)){X=x.markSize;T=x.mark;var ac=Math.round(af.u2p(x.value))+0.5;i=Q;m=Q+X;if(this.shadow){this.renderer.shadowRenderer.draw(S,[[i,ac],[m,ac]],{lineCap:"butt",lineWidth:this.gridLineWidth*1.5,offset:this.gridLineWidth*0.75,fill:false,closePath:false})}j(i,ac,m,ac,{strokeStyle:af.borderColor});i=ae-X;m=ae;if(this.shadow){this.renderer.shadowRenderer.draw(S,[[i,ac],[m,ac]],{lineCap:"butt",lineWidth:this.gridLineWidth*1.5,offset:this.gridLineWidth*0.75,fill:false,closePath:false})}j(i,ac,m,ac,{strokeStyle:af.borderColor})}break;case"x2axis":if(x.showGridline&&this.drawGridlines&&(!x.isMinorTick||af.showMinorTicks)){j(ac,this._bottom,ac,this._top)}if(x.showMark&&x.mark&&(!x.isMinorTick||af.showMinorTicks)){X=x.markSize;T=x.mark;var ac=Math.round(af.u2p(x.value))+0.5;switch(T){case"outside":i=this._top-X;m=this._top;break;case"inside":i=this._top;m=this._top+X;break;case"cross":i=this._top-X;m=this._top+X;break;default:i=this._top-X;m=this._top;break}if(this.shadow){this.renderer.shadowRenderer.draw(S,[[ac,i],[ac,m]],{lineCap:"butt",lineWidth:this.gridLineWidth,offset:this.gridLineWidth*0.75,depth:2,fill:false,closePath:false})}j(ac,i,ac,m)}break;case"y2axis":if(x.showGridline&&this.drawGridlines&&(!x.isMinorTick||af.showMinorTicks)){j(this._left,ac,this._right,ac)}if(x.showMark&&x.mark&&(!x.isMinorTick||af.showMinorTicks)){X=x.markSize;T=x.mark;var ac=Math.round(af.u2p(x.value))+0.5;switch(T){case"outside":i=this._right;m=this._right+X;break;case"inside":i=this._right-X;m=this._right;break;case"cross":i=this._right-X;m=this._right+X;break;default:i=this._right;m=this._right+X;break}if(this.shadow){this.renderer.shadowRenderer.draw(S,[[i,ac],[m,ac]],{lineCap:"butt",lineWidth:this.gridLineWidth*1.5,offset:this.gridLineWidth*0.75,fill:false,closePath:false})}j(i,ac,m,ac,{strokeStyle:af.borderColor})}break;default:break}}}x=null}af=null;h=null}S.restore();function j(d,f,k,c,g){S.save();g=g||{};if(g.lineWidth==null||g.lineWidth!=0){b.extend(true,S,g);S.beginPath();S.moveTo(d,f);S.lineTo(k,c);S.stroke()}S.restore()}if(this.shadow){if(y.yMidAxis.show){var P=[[this._left,this._bottom],[Q,this._bottom]];this.renderer.shadowRenderer.draw(S,P);var P=[[ae,this._bottom],[this._right,this._bottom],[this._right,this._top]];this.renderer.shadowRenderer.draw(S,P);var P=[[Q,this._bottom],[Q,this._top]];this.renderer.shadowRenderer.draw(S,P)}else{var P=[[this._left,this._bottom],[this._right,this._bottom],[this._right,this._top]];this.renderer.shadowRenderer.draw(S,P)}}if(this.borderWidth!=0&&this.drawBorder){if(y.yMidAxis.show){j(this._left,this._top,Q,this._top,{lineCap:"round",strokeStyle:y.x2axis.borderColor,lineWidth:y.x2axis.borderWidth});j(ae,this._top,this._right,this._top,{lineCap:"round",strokeStyle:y.x2axis.borderColor,lineWidth:y.x2axis.borderWidth});j(this._right,this._top,this._right,this._bottom,{lineCap:"round",strokeStyle:y.y2axis.borderColor,lineWidth:y.y2axis.borderWidth});j(this._right,this._bottom,ae,this._bottom,{lineCap:"round",strokeStyle:y.xaxis.borderColor,lineWidth:y.xaxis.borderWidth});j(Q,this._bottom,this._left,this._bottom,{lineCap:"round",strokeStyle:y.xaxis.borderColor,lineWidth:y.xaxis.borderWidth});j(this._left,this._bottom,this._left,this._top,{lineCap:"round",strokeStyle:y.yaxis.borderColor,lineWidth:y.yaxis.borderWidth});j(Q,this._bottom,Q,this._top,{lineCap:"round",strokeStyle:y.yaxis.borderColor,lineWidth:y.yaxis.borderWidth});j(ae,this._bottom,ae,this._top,{lineCap:"round",strokeStyle:y.yaxis.borderColor,lineWidth:y.yaxis.borderWidth})}else{j(this._left,this._top,this._right,this._top,{lineCap:"round",strokeStyle:y.x2axis.borderColor,lineWidth:y.x2axis.borderWidth});j(this._right,this._top,this._right,this._bottom,{lineCap:"round",strokeStyle:y.y2axis.borderColor,lineWidth:y.y2axis.borderWidth});j(this._right,this._bottom,this._left,this._bottom,{lineCap:"round",strokeStyle:y.xaxis.borderColor,lineWidth:y.xaxis.borderWidth});j(this._left,this._bottom,this._left,this._top,{lineCap:"round",strokeStyle:y.yaxis.borderColor,lineWidth:y.yaxis.borderWidth})}}S.restore();S=null;y=null}})(jQuery);