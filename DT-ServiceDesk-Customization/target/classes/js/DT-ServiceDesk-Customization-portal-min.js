AJS.toInit(function(){var b=AJS.$("#baseURL").val();var c={addConfiguration:function(){if(AJS.$("#name").val()!==""&&AJS.$("#description").val()!==""){AJS.$.ajax({url:b+"/rest/dealertracks/servicedeskrest/1.0/ServiceDeskField/addServiceDeskMainField.json?name="+AJS.$("#name").val()+"&description="+AJS.$("#description").val(),type:"PUT",contentType:"application/json",success:function(d){AJS.$("#request-types-table-main-field .ui-sortable tr").remove();TableRowAppender.showServiceDeskTableRows(d)}});JIRA.Messages.showSuccessMsg("Configuration Added!")}},removeConfiguration:function(d,e){AJS.$.ajax({url:b+"/rest/dealertracks/servicedeskrest/1.0/ServiceDeskField/deleteServiceDeskMainField.json?name="+d+"&description="+e,type:"PUT",contentType:"application/json",success:function(f){AJS.$("#request-types-table-main-field .ui-sortable tr").remove();TableRowAppender.showServiceDeskTableRows(f)}});JIRA.Messages.showSuccessMsg("Configuration Deleted!")},updateConfiguration:function(e,f,d){AJS.$.ajax({url:b+"/rest/dealertracks/servicedeskrest/1.0/ServiceDeskField/updateServiceDeskMainField.json?name="+e+"&description="+f+"&service_id="+d,type:"PUT",contentType:"application/json",success:function(g){AJS.$("#request-types-table-main-field .ui-sortable tr").remove();TableRowAppender.showServiceDeskTableRows(g)}});JIRA.Messages.showSuccessMsg("Configuration Updated!")},cancelConfiguration:function(){AJS.$.ajax({url:b+"/rest/dealertracks/servicedeskrest/1.0/ServiceDeskField/cancelServiceDeskMainField",type:"PUT",contentType:"application/json",success:function(d){AJS.$("#request-types-table-main-field .ui-sortable tr").remove();TableRowAppender.showServiceDeskTableRows(d)}})},getAllConfigurations:function(){AJS.$("#request-types-table-main-field .ui-sortable tr").remove();AJS.$.ajax({url:b+"/rest/dealertracks/servicedeskrest/1.0/ServiceDeskField/getServiceDeskMainFields.json",dataType:"json",type:"GET",success:function(d){AJS.log("Parsing the response and converting them to table rows");TableRowAppender.showServiceDeskTableRows(d)}})},};c.getAllConfigurations();AJS.$("#request-types-table-main-field tbody tr").live("mouseover",function(){AJS.$(this).css("background-color","#E8E8E8")});AJS.$("#request-types-table-main-field tbody tr").live("mouseout",function(){AJS.$(this).css("background-color","white")});AJS.$("#request-types-table-main-field tbody tr .tdadd").live("mouseover",function(){if(AJS.$(this).children(".icons").length===0){AJS.$(this).append('<div class="icons"></div>')}AJS.$(this).children(".icons").append('<a style="float:right" class="aui-icon-small aui-iconfont-edit"/>');AJS.$(this).addClass("tdhover")});AJS.$("#request-types-table-main-field tbody tr .tdadd").live("mouseout",function(){AJS.$(this).children(".icons").remove();AJS.$(this).removeClass("tdhover")});AJS.$("#request-types-table-main-field tbody tr .tdadd").live("click",function(){var h=AJS.$(this).closest("tr");var g=[];AJS.$(this).closest("tr").find("td").each(function(){var i="";if(i===""){AJS.$(this).find("input").each(function(){if(AJS.$(this).is(":text")){i=AJS.$(this).val()}if(AJS.$(this).is(":hidden")){i=AJS.$(this).val()}})}if(i===""){AJS.$(this).find("textarea").each(function(){i=AJS.$(this).val()})}if(i===""){i=AJS.$(this).text()}g.push(i)});AJS.log("Field to delete for Name "+g[0]);AJS.log("Field to delete for Description "+g[1]);var e=g[0];var f=g[1];var d=g[2];AJS.$(this).parent().html('<td class="tdhout"><input value="'+e+'" class="text" /></td><td><textarea rows="3" cols="70" class="textarea-cell" id="description" name="description" >'+f+'</textarea></td><td colspan="2"><input type="hidden" value="'+d+'"  /> <input type="button" class="updateconfiguration" value="update" style="margin-right:10px"/><a  href="#" class="cancelconfiguration" original-title="">cancel</a></td>')});AJS.$(".cancelconfiguration").live("click",function(){c.cancelConfiguration()});AJS.$(".updateconfiguration").live("click",function(){var h=AJS.$(this).closest("tr");var g=[];AJS.$(this).closest("tr").find("td").each(function(){var i="";if(i===""){AJS.$(this).find("input").each(function(){if(AJS.$(this).is(":text")){i=AJS.$(this).val()}if(AJS.$(this).is(":hidden")){i=AJS.$(this).val()}})}if(i===""){AJS.$(this).find("textarea").each(function(){i=AJS.$(this).val()})}if(i===""){i=AJS.$(this).text()}g.push(i)});AJS.log("Field to update for Name "+g[0]);AJS.log("Field to update for Description "+g[1]);var e=g[0];var f=g[1];var d=g[2];c.updateConfiguration(e,f,d)});AJS.$(".add-main-config").click(function(){c.addConfiguration()});AJS.$(".deleteconfiguration").live("click",function(){var g=AJS.$(this).closest("tr");var f=[];AJS.$(this).closest("tr").find("td").each(function(){f.push(AJS.$(this).text())});AJS.log("Field to delete for Name "+f[0]);AJS.log("Field to delete for Description "+f[1]);var d=f[0];var e=f[1];c.removeConfiguration(d,e)});function a(){var g,e;AJS.$(".error").html("");var f=AJS.$("#name").val();var d=AJS.$("#description").val();if(!name){e=AJS.I18n.getText("servicedesk.admin.portal.errorname")}if(!description){g=AJS.I18n.getText("servicedesk.admin.portal.errordescription")}if(e){AJS.$("#name").focus().siblings(".error").html(errorMessagename);return false}if(g){AJS.$("#description").focus().siblings(".error").html(errorMessagedescription);return false}return true}});